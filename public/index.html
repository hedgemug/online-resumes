<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Online Resumes App</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="index.css">
  <script src="https://unpkg.com/vue/dist/vue.js"></script>
  <script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>
  <script src="https://unpkg.com/axios/dist/axios.js"></script>
  <script src="index.js" defer></script>
</head>
<body>
  <nav>
    <div class="nav-wrapper">
      <a href="#!" class="brand-logo center">Online Resumes App</a>
      <ul class="left hide-on-med-and-down">
        <li><a href="sass.html">Sass</a></li>
        <li><a href="badges.html">Components</a></li>
        <li class="active"><a href="collapsible.html">JavaScript</a></li>
      </ul>
    </div>
  </nav>
  <br>

  <div id="vue-app">

    <router-view></router-view>

  </div>
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <!-- Compiled and minified CSS -->
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">

   <!-- Compiled and minified JavaScript -->
   <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
   <script>
    $(document).ready(function(){    
    $('.modal').modal();
  });
  </script>  
</body>
</html>

<template id="student-index-page">  
  <div class="vue-component big-frame">
    
    <div class="row">
        <div class="col s4 center-align">
          Search by name: <input v-model="nameFilter" list="names">
        </div>
        <div class="col s4 center-align">
          Search by job title: <input v-model="jobTitleFilter">
        </div>
        <div class="col s4 center-align">
          Search by school: <input v-model="schoolFilter">
        </div>
    </div>

    <datalist id="names">
      <option v-for="student in students">{{ student.student_name }}</option>
    </datalist>    
    
    <div class="row">
      
      <div class="col s10 center-align">
        <div>
          <button v-on:click="setSortAttribute('student_name')" class="btn modal-trigger waves-effect waves-light z-depth-4">Sort by name</button>
          <button v-on:click="setSortAttribute('job_title')" class="btn modal-trigger waves-effect waves-light z-depth-4">Sort by job</button>
          <button v-on:click="setSortAttribute('university_title')" class="btn modal-trigger waves-effect waves-light z-depth-4">Sort by school</button>
        </div>
      </div>
    </div>    
    <br>

    <div class="row">
        <div class="col s2 center-align"></div>
        <div class="col s2 center-align">
          <h5 class="left-align valign-wrapper">Name</h5>
        </div>
        <div class="col s2 center-align">
          <h5 class="left-align valign-wrapper">Job</h5>
        </div>
        <div class="col s2 center-align">
          <h5 class="left-align valign-wrapper">School</h5>
        </div>
        <div class="col s4 center-align"></div>        
    </div>
    <div  v-for="student in sortedStudents" v-if="isValidStudent(student)" v-bind:key="student.id">
    
      <div class="row">
        <div class="col s2 center-align">
          <a href="/#/students/id"><img class="small-img z-depth-4" src="/images/1.jpg" alt="students photo"></a>
        </div>
        <div class="col s2">
          <a href="/#/student/id"><p class="left-align; valign-wrapper">{{student.student_name}}</p></a>
        </div>
        
        <div class="col s2">
          <p class="left-align; valign-wrapper">{{student.job_title}}</p>
        </div>

        <div class="col s2">
          <p class="left-align valign-wrapper">{{student.university_title}}</p>
        </div>

        <div class="col s4">
          <a class="waves-effect waves-light btn z-depth-4" :href="'/#/students/' + student.id">Resume</a>
                  <!-- Modal Trigger -->
          <button data-target="show-contact" class="btn modal-trigger waves-effect waves-light z-depth-4" v-on:click="setCurrentStudent(student)">Contact</button>

        </div>
      </div>
    </div>        

    <!-- Modal Structure -->
    <div id="show-contact" class="modal">
      <div class="modal-content">        
        <a href="/#/currentStudent/1"><h5>{{currentStudent.student_name}}</h5></a>
        <img class="small-img z-depth-4" src="/images/1.jpg" alt="students photo">        
        <p>Email: {{ currentStudent.email }}</p>
        <div class="inline-block">
          <span>
            <i class="material-icons">phone</i>
            <p>Phone: {{ currentStudent.phone_number }}</p>
          </span>
        </div>  
        <p>Linkedin: {{ currentStudent.linkedin_url }}</p>
      </div>
      <div class="modal-footer">
        <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">Done</a>
      </div>
    </div>
          

  </div>      
</template>

<template id="students-show-page">
  <div class="vue-component">
    <div class="container">
      <img class="small-img z-depth-4" src="images/1.jpg" alt="">
      <div class="row">
        <div class="col">
          <h3>{{student.first_name}} {{student.last_name}}</h3>
        </div>
        <div class="col">
          <h3>{{student.job_title}}</h3>
        </div>
      </div>
      <div class="row">
        <p>{{student.bio}}</p>
      </div>
      
      
    </div>
  </div>
</template>